var engine={};engine.ERROR_CODE_REQUIRE_USERNAME={code:"ERROR_CODE_REQUIRE_USERNAME",msg:"\u672a\u8f93\u5165\u7528\u6237\u540d"};engine.ERROR_CODE_REQUIRE_PASSWORD={code:"ERROR_CODE_REQUIRE_PASSWORD",msg:"\u672a\u8f93\u5165\u5bc6\u7801"};engine.ERROR_CODE_USERNAME_OR_PASSWORD_ERROR={code:"ERROR_CODE_USERNAME_OR_PASSWORD_ERROR",msg:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"};engine.ERROR_CODE_USERNAME_INVALIDATE={code:"ERROR_CODE_USERNAME_INVALIDATE",msg:"\u7528\u6237\u540d\u5fc5\u987b\u4e3a4-16\u4f4d\u82f1\u6587\u5b57\u7b26\u6216\u80052-8\u4f4d\u4e2d\u6587\u5b57\u7b26"};engine.ERROR_CODE_NICKNAME_INVALIDATE={code:"ERROR_CODE_NICKNAME_INVALIDATE",msg:"\u6635\u79f0\u957f\u5ea6\u5fc5\u987b\u4e3a4-16\u4f4d\u82f1\u6587\u5b57\u7b26\u6216\u80052-8\u4f4d\u4e2d\u6587\u5b57\u7b26"};engine.ERROR_CODE_PASSWORD_INVALIDATE={code:"ERROR_CODE_PASSWORD_INVALIDATE",msg:"\u5bc6\u7801\u957f\u5ea6\u5fc5\u987b\u4e3a6-32\u4f4d"};engine.ERROR_CODE_PASSWORD_DIFFERENCE={code:"ERROR_CODE_PASSWORD_DIFFERENCE",msg:"\u4e24\u6b21\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4"};engine.ERROR_CODE_EMAIL_INVALIDATE={code:"ERROR_CODE_EMAIL_INVALIDATE",msg:"\u90ae\u4ef6\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e"};engine.ERROR_CODE_NICKNAME_ERROR={code:"ERROR_CODE_NICKNAME_ERROR",msg:"\u6635\u79f0\u9519\u8bef"};engine.ERROR_CODE_USERNAME_EXISTS={code:"ERROR_CODE_USERNAME_EXISTS",msg:"\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c"};engine.ERROR_CODE_NICKNAME_EXISTS={code:"ERROR_CODE_NICKNAME_EXISTS",msg:"\u6635\u79f0\u5df2\u88ab\u6ce8\u518c"};engine.ERROR_CODE_EMAIL_EXISTS={code:"ERROR_CODE_EMAIL_EXISTS",msg:"\u90ae\u4ef6\u5730\u5740\u5df2\u88ab\u6ce8\u518c"};engine.ERROR_CODE_TIMEOUT={code:"ERROR_CODE_TIMEOUT",msg:"\u7f51\u7edc\u6162,\u8bf7\u7a0d\u7b49"};engine.ERROR_CODE_APPID_NOTFOUND={code:"ERROR_CODE_APPID_NOTFOUND",msg:"\u5e94\u7528\u7a0b\u5e8fID\u4e0d\u5b58\u5728"};engine.ERROR_CODE_SERVICE_BUSY={code:"ERROR_CODE_SERVICE_BUSY",msg:"\u670d\u52a1\u5fd9\uff0c\u7a0d\u540e\u91cd\u8bd5"};engine.ERROR_CODE_UNKNOWN_ERROR={code:"ERROR_CODE_UNKNOWN_ERROR",msg:"\u672a\u77e5\u9519\u8bef"};engine.client={};engine.passport={appid:-1,passportCookie:{},loginUrl:"http://passport.cdqss.com/jsLogin.vhtml",logoutUrl:"http://passport.cdqss.com/jsLogout.vhtml",registeUrl:"http://passport.cdqss.com/jsRegiste.vhtml",userExistsUrl:"http://passport.cdqss.com/userExists.vhtml",nicknameExistsUrl:"http://passport.cdqss.com/nicknameExists.vhtml",emailExistsUrl:"http://passport.cdqss.com/emailExists.vhtml",loginStatus:"",registeStatus:"",logoutStaus:"",usernameExistStatus:"",nicknameExistStatus:"",emailExistStatus:"",maxIntervalCount:30,delay:300,ajaxCounter:0};engine.passport.validate=function(){var a=true;if(this.appid==-1){a=false;alert("\u672a\u8bbe\u7f6e\u6709\u6548\u7684\u5e94\u7528\u7a0b\u5e8fID.")}if(!a){return}};engine.passport.doLogin=function(e,b,c){if(!this.loginAjax){this.loginAjax=new this.ScriptAjax()}if(this.loginAjax.timer){return}this.validate();var d=[];if(!e){d.push(engine.ERROR_CODE_REQUIRE_USERNAME)}if(!b){d.push(engine.ERROR_CODE_REQUIRE_PASSWORD+"\u7a7a\u6d1e")}if(d.length>0){engine.client.reportLoginError(d);return}engine.client.loginWaittingView();var a=this.loginUrl+"?username="+encodeURI(e)+"&password="+base64Encode(b)+"&autologon="+(c?"true":"false")+"&appid="+this.appid+"&t="+Math.random();this.loginAjax.send(a,function(){var f=engine.passport.loginStatus;if(f==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(f=="success"){engine.client.logged()}else{if(typeof(f)=="object"){var h=f.length;var j=[];for(var i=0;i<h;i++){var g=f[i];j.push(engine[g])}engine.client.reportLoginError(j)}else{engine.client.reportLoginError([engine.ERROR_CODE_TIMEOUT])}}engine.passport.loginStatus=""})};engine.passport.doRegiste=function(g,e,b,a,d){if(!this.registeAjax){this.registeAjax=new this.ScriptAjax()}if(this.registeAjax.timer){return}this.validate();var f=[];if(String(g).gblen()<4||String(g).gblen()>16){f.push(engine.ERROR_CODE_USERNAME_INVALIDATE)}if(String(a).gblen()<4||String(a).gblen()>16){f.push(engine.ERROR_CODE_NICKNAME_INVALIDATE)}if(!/^.{6,32}$/.test(e)){f.push(engine.ERROR_CODE_PASSWORD_INVALIDATE)}if(e!=b){f.push(engine.ERROR_CODE_PASSWORD_DIFFERENCE)}if(!/^([a-z0-9A-Z]+[-|\.]?)+[a-z0-9A-Z]@([a-z0-9A-Z]+(-[a-z0-9A-Z]+)?\.)+[a-zA-Z]{2,}$/.test(d)){f.push(engine.ERROR_CODE_EMAIL_INVALIDATE)}if(f.length>0){engine.client.reportRegError(f);return}engine.client.registeWaittingView();var c=this.registeUrl+"?username="+encodeURI(g)+"&password="+base64Encode(e)+"&nickname="+encodeURI(a)+"&email="+encodeURI(d)+"&appid="+this.appid+"&t="+Math.random();new this.registeAjax.send(c,function(){var h=engine.passport.registeStatus;if(h==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(h=="success"){engine.client.registeSuccess()}else{if(typeof(h)=="object"){var j=h.length;var l=[];for(var k=0;k<j;k++){var i=h[k];l.push(engine[i])}engine.client.reportRegError(l)}else{engine.client.reportRegError([engine.ERROR_CODE_TIMEOUT])}}engine.passport.registeStatus=""})};engine.passport.doLogout=function(){if(!this.logoutAjax){this.logoutAjax=new this.ScriptAjax()}if(this.logoutAjax.timer){return}this.validate();var a=this.logoutUrl+"?appid="+this.appid+"&t="+Math.random();this.logoutAjax.send(a,function(){var b=engine.passport.logoutStatus;if(b==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(b=="success"){engine.client.logoutSuccess()}else{if(typeof(b)=="object"){var d=b.length;var f=[];for(var e=0;e<d;e++){var c=b[e];f.push(engine[c])}engine.client.logged();engine.client.reportLogoutError(f)}else{engine.client.logged();engine.client.reportLogoutError([engine.ERROR_CODE_TIMEOUT])}}engine.passport.logoutStaus=""})};engine.passport.isUserExist=function(c,b){if(!this.userExistAjax){this.userExistAjax=new this.ScriptAjax()}if(this.userExistAjax.timer){return}var a=this.userExistsUrl+"?username="+c+"&t="+Math.random();this.userExistAjax.send(a,function(){var d=engine.passport.usernameExistStatus;if(d==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(typeof(b)=="function"){b(d)}engine.passport.usernameExistStatus=""})};engine.passport.isNicknameExist=function(a,c){if(!this.nicknameExistAjax){this.nicknameExistAjax=new this.ScriptAjax()}if(this.nicknameExistAjax.timer){return}var b=this.nicknameExistsUrl+"?nickname="+(a)+"&t="+Math.random();this.nicknameExistAjax.send(b,function(){var d=engine.passport.nicknameExistStatus;if(d==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(typeof(c)=="function"){c(d)}engine.passport.nicknameExistStatus=""})};engine.passport.isEmailExist=function(b,c){if(!this.emailExistAjax){this.emailExistAjax=new this.ScriptAjax()}if(this.emailExistAjax.timer){return}var a=this.emailExistsUrl+"?email="+encodeURI(b)+"&t="+Math.random();this.emailExistAjax.send(a,function(){var d=engine.passport.emailExistStatus;if(d==""&&this.intervalCount<engine.passport.maxIntervalCount){this.intervalCount++;return}clearInterval(this.timer);this.timer=null;if(typeof(c)=="function"){c(d)}engine.passport.emailExistStatus=""})};engine.passport.loadCSS=function(){if($$("passportStyle")){return}var c=[];c.push(".passport-wnd{z-index:1000; position:absolute; border:1px solid #0b78cc; width:240px; background:#3594dd; padding:5px; font:12px Verdana, Arial, Helvetica, sans-serif;}");c.push(".passport-wnd table{font:12px Verdana, Arial, Helvetica, sans-serif;}");c.push(".passport-wnd *{margin:0px; padding:0px;}");c.push(".passport-wnd acronym{font-weight:bold; cursor:default;}");c.push(".passport-wnd input{vertical-align:middle;}");c.push(".passport-wnd a{color:#00c; text-decoration:none;}");c.push(".passport-wnd a:hover{text-decoration:underline;}");c.push(".passport-wndwrap{background:#fff; padding:20px; position:relative; text-align:left;}");c.push(".passport-wndclose{position:absolute; top:10px; right:10px; cursor:pointer;}");c.push(".passport-btn{padding:3px 10px; background:#005ba3 url(http://passport.cdqss.com/skin/btnbg.gif) repeat-x; color:#fff;}");c.push(".passport-text{padding:3px; line-height:14px; border:1px solid #5ebefc; background:#e2f2fc;}");c.push(".passport-text.error{border-color:#f00; color:#f00; background:#ffc;}");c.push(".passport-error{margin:0px; background:#ffc; border:1px solid #c96; padding:5px; margin-bottom:10px; line-height:1.7;}");var b=c.join("");var d=document.getElementsByTagName("head").item(0);var a=document.createElement("style");a.type="text/css";a.id="passportStyle";if(a.styleSheet){a.styleSheet.cssText=b}else{b=document.createTextNode(b);a.appendChild(b)}d.appendChild(a)};function $$(a){return document.getElementById(a)}engine.passport.login=function(){var c=$$("passport_username").value;var b=$$("passport_password").value;var a=$$("savepwd").checked;engine.passport.doLogin(c,b,a)};engine.passport.drawLoginBox=function(){if($$("registeBox")){document.body.removeChild($$("registeBox"))}if($$("loginBox")){document.body.removeChild($$("loginBox"))}this.loadCSS();var a=[];a.push('<div class="passport-wndwrap">');a.push('<div class="passport-wndclose"><img src="http://passport.cdqss.com/skin/wnd_close.gif" id="login-close"/></div>');a.push('<form onsubmit="engine.passport.login();return false;">');a.push('<table width="100%" border="0" cellspacing="0" cellpadding="0">');a.push("	<tr>");a.push('		<td height="35" colspan="2"><strong style="font-size:14px; font-weight:bold;">\u767b\u5f55\u5168\u641c\u7d22\u901a\u884c\u8bc1</strong></td>');a.push("	</tr>");a.push('	<tr id="passport-error-display" style="display:none">');a.push('		<td colspan="2">');a.push('		<p class="passport-error" id="loginMessage"></p>');a.push("		</td>");a.push("	</tr>");a.push("	<tr>");a.push('		<td width="50" height="30">\u7528\u6237\u540d</td>');a.push('		<td><input class="passport-text" type="text" id="passport_username" onfocus="this.select();" value="" style="width:120px;" tabindex="101" /></td>');a.push("	</tr>");a.push("	<tr>");a.push('		<td height="30">\u5bc6\u7801</td>');a.push('		<td><input class="passport-text" type="password" id="passport_password" onfocus="this.select();" style="width:120px;" tabindex="102" /></td>');a.push("	</tr>");a.push("	<tr>");a.push('		<td height="30">&nbsp;</td>');a.push('		<td><input id="savepwd" name="autologon" type="checkbox" value="true" tabindex="103" /><label for="savepwd">\u81ea\u52a8\u767b\u5f55</label></td>');a.push("	</tr>");a.push("	<tr>");a.push('		<td height="40">&nbsp;</td>');a.push('		<td><input class="passport-btn" type="submit" value="\u767b\u5f55" tabindex="104"/></td>');a.push("	</tr>");a.push("	<tr>");a.push('		<td height="30" colspan="2">&nbsp;</td>');a.push("	</tr>");a.push("	<tr>");a.push('		<td height="25" colspan="2" align="center"><a href="http://passport.cdqss.com/registe.vhtml" target="_blank">\u6ce8\u518c\u5e10\u53f7</a> | <a href="http://passport.cdqss.com/forget.vhtml" target="_blank">\u627e\u56de\u5bc6\u7801</a></td>');a.push("	</tr>");a.push("</table>");a.push("</form>");a.push("</div>");var b=document.createElement("div");b.id="loginBox";b.className="passport-wnd";b.innerHTML=a.join("");document.body.appendChild(b);this.center(b);this.drag({o:document.getElementById("loginBox")});$$("passport_username").focus();$$("login-close").onclick=function(){$$("loginBox").style.display="none"}};engine.passport.center=function(b){var a=document.documentElement;b.style.top=(a.scrollTop+(a.clientHeight-b.offsetHeight)/2)+"px";b.style.left=(a.clientWidth-b.offsetWidth)/2+"px"};engine.passport.drag=function(b){var a=b.o;a.onmousedown=function(f){var g=document;if(!f){f=window.event}r=[0,document.documentElement.offsetWidth-a.offsetWidth,0,document.documentElement.offsetHeight-a.offsetHeight];var e=f.srcElement||f.target;if("INPUT,TEXTAREA,BUTTON,A,".indexOf(e.tagName+",")>=0){return}var c=f.clientX-a.offsetLeft+document.documentElement.scrollLeft;var h=f.clientY-a.offsetTop+document.documentElement.scrollTop;if(a.setCapture){a.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}g.onmousemove=function(j){if(!j){j=window.event}var k=true;if(!j.pageX){k=false;j.pageX=j.clientX}if(!j.pageY){j.pageY=j.clientY}var i=j.pageX-c,d=j.pageY-h;a.style.left=((!k?document.documentElement.scrollLeft:0)+(i<r[0]?r[0]:i>r[1]?r[1]:i)+"px");a.style.top=((!k?document.documentElement.scrollTop:0)+(d<r[2]?r[2]:d>r[3]?r[3]:d)+"px")};g.onmouseup=function(){if(a.releaseCapture){a.releaseCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}g.onmousemove=null;g.onmouseup=null}}};engine.passport.drawRegisteBox=function(){if($$("registeBox")){document.body.removeChild($$("registeBox"))}if($$("loginBox")){document.body.removeChild($$("loginBox"))}engine.passport.loadCSS();var a=[];a.push('<div class="passport-wndwrap">');a.push('<div class="passport-wndclose"><img src="http://passport.cdqss.com/skin/wnd_close.gif" id="reg-close"/></div>');a.push('<table width="100%" border="0" cellspacing="0" cellpadding="0">   ');a.push("	<tr> ");a.push('		<td height="35" colspan="2"><strong style="font-size:14px; font-weight:bold;">\u6ce8\u518c\u5168\u641c\u7d22\u901a\u884c\u8bc1</strong></td> ');a.push("	</tr>");a.push('	<tr id="reg-passport-error" style="display:none"> ');a.push('		<td colspan="2">   ');a.push('		<p class="passport-error" id="registeMessage"></p> ');a.push("		</td>");a.push("	</tr>");a.push("	<tr> ");a.push('		<td width="60" height="30">\u7528\u6237\u540d</td>   ');a.push('		<td><input class="passport-text" type="text" id="reg-username" onfocus="this.select();" value="" style="width:120px;"  tabindex="201"/> <!--acronym title="\u6b64\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c">?</acronym--></td>');a.push("	</tr> ");a.push("	<tr>  ");a.push('		<td height="30">\u6635\u79f0</td> ');a.push('		<td><input class="passport-text" type="text" id="reg-nickname" onfocus="this.select();" value="" style="width:120px;" tabindex="202" /></td> ');a.push("	</tr> ");a.push("	<tr>  ");a.push('		<td height="30">\u5bc6\u7801</td> ');a.push('		<td><input class="passport-text" type="password" id="reg-password" onfocus="this.select();" style="width:120px;" tabindex="203" /></td>');a.push("	</tr> ");a.push("	<tr>  ");a.push('		<td height="30">\u786e\u8ba4\u5bc6\u7801</td>   ');a.push('		<td><input class="passport-text" type="password" id="reg-cpassword" onfocus="this.select();" style="width:120px;" tabindex="204" /></td>');a.push("	</tr> ");a.push("	<tr>  ");a.push('		<td height="30">\u7535\u5b50\u90ae\u7bb1</td>   ');a.push('		<td><input class="passport-text" type="text" id="reg-email" onfocus="this.select();" style="width:120px;" tabindex="205" /></td>  ');a.push("	</tr> ");a.push("	<!--tr>  ");a.push('		<td height="30">\u9a8c\u8bc1\u7801</td> ');a.push('		<td><input name="validateCode" type="text" class="passport-text" id="valicode" style="width:40px;" onfocus="this.select();" maxlength="4" tabindex="206" />  ');a.push('			<img src="http://passport.cdqss.com/validateCode" id="reg_validateCode" onclick="this.src=\'http://lpp.cdqss.com:81/validateCode?t=\'+ Math.random();" width="60" height="22" align="absmiddle" /></td>  ');a.push("	</tr--> ");a.push("	<tr>  ");a.push('		<td height="30"></td> ');a.push('		<td><input id="passport-agree" checked type="checkbox" /><label for="passport-agree">\u540c\u610f<a href="http://passport.cdqss.com/service.html" target="_blank">\u300a\u670d\u52a1\u4f7f\u7528\u534f\u8bae\u300b</a></label></td> ');a.push("	</tr> ");a.push("	<tr>  ");a.push('		<td height="40">&nbsp;</td> ');a.push('		<td><input class="passport-btn" type="submit" value="\u6ce8\u518c" id="reg-passport-btn" tabindex="207" onclick="engine.passport.registe();"/></td>  ');a.push("	</tr> ");a.push("</table> ");a.push("</div> ");var e=document.createElement("div");e.id="registeBox";e.className="passport-wnd";e.innerHTML=a.join("");document.body.appendChild(e);this.center(e);this.drag({o:document.getElementById("registeBox")});$$("reg-close").onclick=function(){$$("registeBox").style.display="none"};var d=$$("reg-nickname");var c=$$("reg-username");var b=$$("reg-email");d.onblur=function(){if(d.value){engine.passport.isNicknameExist(d.value,function(f){var h=$$("reg-passport-error");var i=$$("registeMessage");if(f=="yes"){i.innerHTML='<span id="nickname-error">\u6635\u79f0\u5df2\u5b58\u5728</span>';h.style.display=""}else{if(f==""){i.innerHTML="\u6635\u79f0\u6821\u9a8c\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u6635\u79f0.";h.style.display=""}else{var g=$$("nickname-error");if(g){i.removeChild(g)}}}})}};c.onblur=function(f){engine.passport.isUserExist(c.value,function(g){var h=$$("reg-passport-error");var j=$$("registeMessage");if(g=="yes"){j.innerHTML='<span id="username-error">\u7528\u6237\u540d\u5df2\u5b58\u5728</span>';h.style.display=""}else{if(g==""){j.innerHTML="\u7528\u6237\u540d\u6821\u9a8c\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165.";h.style.display=""}else{var i=$$("username-error");if(i){j.removeChild(i)}}}})};b.onblur=function(f){engine.passport.isEmailExist(b.value,function(g){var h=$$("reg-passport-error");var j=$$("registeMessage");if(g=="yes"){j.innerHTML='<span id="email-error">\u90ae\u4ef6\u5df2\u5b58\u5728</span>';h.style.display=""}else{if(g==""){j.innerHTML="\u90ae\u4ef6\u6821\u9a8c\u8d85\u65f6\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165.";h.style.display=""}else{var i=$$("email-error");if(i){j.removeChild(i)}}}})}};engine.passport.registe=function(){var f=$$("reg-username").value;var a=$$("reg-nickname").value;var d=$$("reg-password").value;var b=$$("reg-cpassword").value;var c=$$("reg-email").value;var e="";engine.passport.doRegiste(f,d,b,a,c)};engine.passport.ScriptAjax=function(){this.timer=null;this.intervalCount=0;this.scriptId="ScriptAjax"+(++engine.passport.ajaxCounter)};engine.passport.ScriptAjax.prototype.send=function(b,e){this.timer=true;this.intervalCount=0;var d=$$(this.scriptId);var c=document.getElementsByTagName("head")[0];if(d){d.parentNode.removeChild(d)}d=document.createElement("script");d.setAttribute("id",this.scriptId);d.setAttribute("type","text/javascript");d.src=b;c.appendChild(d);var a=this;this.timer=setInterval(function(){if(typeof(e)=="function"){e.call(a,d)}},engine.passport.delay)};engine.event={};engine.event.addEvent=function(b,c,a){if(b.attachEvent){b["e"+a]=a;b[c+a]=function(){b["e"+a](window.event)};b.attachEvent("on"+c,b[c+a])}else{b.addEventListener(c,a,false)}};engine.event.removeEvent=function(b,c,a){if(b.detachEvent){b.detachEvent("on"+c,b[c+a]);b[c+a]=null}else{b.removeEventListener(c,a,false)}};engine.passport.parsePassportCookie=function(){var b=this.getCookie("passportcookie");if(b){b=b.replace(/\"/g,"");var a=b.split(":");this.passportCookie.ssosessionid=a[0];this.passportCookie.username=utf8.decode(base64Decode(a[1]));this.passportCookie.nickname=utf8.decode(base64Decode(a[2]));this.passportCookie.email=base64Decode(a[3])}};engine.passport.addCookie=function(c,e,a,d){var b=c+"="+escape(e)+";path=/;";if(a>0){var f=new Date();f.setTime(f.getTime()+a*1000);b+="expires="+f.toGMTString()+";"}if(d){b+="domain="+d+";"}document.cookie=b};engine.passport.removeCookie=function(b,c){var d=new Date();d.setTime(d.getTime()-1);var a=b+"=;expires="+d.toGMTString()+";path=/;";if(c){a+="domain="+c+";"}document.cookie=a};engine.passport.getCookie=function(b){var a=document.cookie;var d=null;if(a==""){return d}var e=a.split("; ");for(var f=0;f<e.length;f++){var c=e[f];if(c==b){d="";break}else{if(e[f].indexOf(b+"=")==0){d=unescape(e[f].substr(b.length+1));break}}}return d};function base64Encode(i){var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var e=[];var h=0;while(h<i.length){var m=i.charCodeAt(h++);var l=i.charCodeAt(h++);var k=i.charCodeAt(h++);var a=(m<<16)+((l||0)<<8)+(k||0);var g=(a&(63<<18))>>18;var f=(a&(63<<12))>>12;var d=isNaN(l)?64:(a&(63<<6))>>6;var b=isNaN(k)?64:(a&63);e[e.length]=j.charAt(g);e[e.length]=j.charAt(f);e[e.length]=j.charAt(d);e[e.length]=j.charAt(b)}return e.join("")}function base64Decode(i){var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var g={strlen:(i.length%4!=0),chars:new RegExp("[^"+j+"]").test(i),equals:(/=/.test(i)&&(/=[^=]/.test(i)||/={3}/.test(i)))};if(g.strlen||g.chars||g.equals){throw new Error("Invalid base64 data")}var n=[];var h=0;while(h<i.length){var f=j.indexOf(i.charAt(h++));var e=j.indexOf(i.charAt(h++));var d=j.indexOf(i.charAt(h++));var b=j.indexOf(i.charAt(h++));var a=(f<<18)+(e<<12)+((d&63)<<6)+(b&63);var m=(a&(255<<16))>>16;var l=(d==64)?-1:(a&(255<<8))>>8;var k=(b==64)?-1:(a&255);n[n.length]=String.fromCharCode(m);if(l>=0){n[n.length]=String.fromCharCode(l)}if(k>=0){n[n.length]=String.fromCharCode(k)}}return n.join("")}var utf8={decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};String.prototype.gblen=function(){var a=0;for(var b=0;b<this.length;b++){if(this.charCodeAt(b)>127||this.charCodeAt(b)==94){a+=2}else{a++}}return a};engine.client={};engine.client.loginWaittingView=function(){var a=$$("loginBox");if(a){$$("loginMessage").innerHTML="\u767b\u5f55\u4e2d..."}};engine.client.logged=function(){var a=$$("loginBox");if(a){a.style.display="none"}};engine.client.unLogged=function(){};engine.client.reportLoginError=function(d){var a=d.length;var c="";if($$("loginBox")){for(var b=0;b<a;b++){c+=d[b].msg+"<br/>"}$$("loginMessage").innerHTML=c;$$("passport-error-display").style.display=""}else{for(var b=0;b<a;b++){c+=d[b].msg+"\n"}alert(c)}location.reload()};engine.client.reportRegError=function(e){var b=$$("registeMessage");var d="";var a=e.length;if(b){for(var c=0;c<a;c++){d+=e[c].msg+"<br/>"}b.innerHTML=d;$$("reg-passport-error").style.display=""}else{for(var c=0;c<a;c++){d+=e[c].msg+"\n"}alert(d)}};engine.client.registeWaittingView=function(){var a=$$("registeMessage");if(a){a.innerHTML="\u6b63\u5728\u6ce8\u518c...";$$("reg-passport-error").style.display=""}};engine.client.registeSuccess=function(){var a=$$("registeMessage");if(a){a.innerHTML="\u6ce8\u518c\u6210\u529f\uff0c3\u79d2\u949f\u540e\u5173\u95ed.";$$("reg-passport-error").style.display="";setTimeout(function(){$$("registeBox").style.display="none"},3000)}};engine.client.reportLogoutError=function(a){alert(a)};engine.client.logoutSuccess=function(){this.unLogged()};
